我第一次做 web3 的产品时，思考最多的问题，就是节点凭什么给客户端数据，这一点，和做 web2 的产品是有本质的区别。  

做web2时，客户端想要什么数据，服务器就返回什么数据，web3不是你想要什么数据，就给你，这就是做 web3时，问得最多的问题，凭什么给你？

凭签名！

你在接入节点时，存入的数据，都进行了签名，在提取数据时，你也需要签名，节点签名验证过了，才会返回数据给你。

也就是你拿不到，其他用户存入节点的数据，或者及时拿到了，你也解密不出来，这就是公私钥，除了签名，验证签名的第 2 个作用，加密和解密。

公钥和私钥都是成对的，它们有 2 个作用：加密解密，签名验签，其中，私钥用于签名和解密消息，公钥用于验证数字签名和加密消息，数字签名用于确保消息的完整性和来源，以便接收方可以信任消息。

例子一：加密解密  

例子二：签名验签

签名验证签名的应用

思考一个问题，你在做 web2 服务间调用是如何做的？我在 20 年，做一款产品，涉及众多服务，相互之前要调用。

因此，我们构建了一个统一认证服务中心 UnionAuth，如下图。

![UnionAuth.jpg](UnionAuth.jpg)

所有服务，要相互通信，则需要在 UnionAuth 注册，由 UnionAuth分配 AppKey 和 SecretKey。

比如，Server1 要调用 signing machine 签名机器的接口，总共需要 8 步。

1,2: Server1 使用 AppKey、 SecretKey向 UnionAuth 请求访问 signing machine 的临时凭证 Ticket。  

3,6: Server1 拿到临时凭证 Ticket 登录signing machine，请求分配 Token。  

4,5: signing machine 拿到临时凭证 Ticket到 UnionAuth 验证，验证通过，则为 Server1颁发 Token  

8: Server1 拿到 Token，向客户端一样，开始请求signing machine接口。  

虽然，第 8 步，以后，Server1 可以访问signing machine，不在需要 UnionAuth，但当 Token 过期了，由需要从第 1 步开始执行。

这种方案，有一个问题，就是单机故障，只要 UnionAuth 服务挂了，整套系统，都回受到影响。

接下来，看一下，我们在 Web3，上是如何解决，这个问题的。

![NoUnionAuth.jpg](NoUnionAuth.jpg)

在 Web3上，不再需要 UnionAuth，则可以实现服务之间的安全访问，并且，只需要 3 步。

还是以 Server1访问 signing machine 签名机器服务。

1,2: Server1 用自己的私钥签名，和 signing machine 之间约定的通信，参数 X, signing machine 收到签名，则进行验证签名
验证通过，则返回 Token。

3：Server1 拿到 Token，向客户端一样，开始请求signing machine接口。


签名数据，被重放，则使用 nonce